<!DOCTYPE HTML>
<html>
<head>
   <title>eth data</title>
   <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/p5.js"></script>
   <script>
   var the=0;
   function setup(){
   }
   window.onload = function () {
      var dps = []; // dataPoints
      var chart = new CanvasJS.Chart("chartContainer", {
      	title :{
      		text: "REAL TIME ETHEREUM STATISTICS"
      	},
      	axisY: {
      		includeZero: false
      	},
      	data: [{
      		type: "line",
      		dataPoints: dps
      	}]
      });
      var mn=0;
      function gotData(data)
      {
         //console.log(weather.USD);
         //var hell = weather.USD;
         the = data.USD;
      }
      var xVal = 0;
      var yVal = 7000;
      var updateInterval = 5000;
      var dataLength = 10; // number of dataPoints visible at any point
      //console.log(weather.USD);
      var updateChart = function (count) {
         //loadJSON('https://min-api.cryptocompare.com/data/price?fsym=BTC&tsyms=USD',gotData);
         loadJSON('https://min-api.cryptocompare.com/data/price?fsym=ETH&tsyms=USD',gotData);
         //console.log();
         //console.log(weather/1000);
      	count = count || 1;
      	for (var j = 0; j < count; j++) {
            //console.log(hello/1000);
      		yVal = the;//Math.round(5 + Math.random() *(-5-5))
            mn = the;
            if(the > mn)
            {
               mn = the;
            }
      		dps.push({
      			x: xVal,
      			y: yVal
      		});
      		xVal+=1;
      	}
         console.log(mn);
      	if (dps.length > dataLength) {
      		dps.shift();
      	}

      	chart.render();
      };

      updateChart(dataLength);
      setInterval(function(){updateChart()}, updateInterval);

      }

   </script>
</head>
<body>
   <div id="chartContainer" style="height: 800px; width:50%;"></div>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

</body>
</html>
